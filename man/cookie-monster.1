.TH COOKIE-MONSTER 1 "February 2026" "cookie-monster-cli 0.1.0" "User Commands"
.SH NAME
cookie-monster \- capture browser auth headers from DevTools and replay requests
.SH SYNOPSIS
.B cookie-monster
[\-\-version] [\-\-format {json|ndjson}]
.I command
.RI [ options ]
.SH DESCRIPTION
.B cookie-monster
captures request headers from browser DevTools network traffic and replays HTTP requests for automation.
.SH COMMANDS
.TP
.B capture
Capture request headers.
.TP
.B replay
Replay an HTTP request with captured headers.
.TP
.B profile-list
List local browser profiles from Local State metadata.
.TP
.B list-targets
List active debuggable page targets from DevTools.
.TP
.B doctor
Run environment and connectivity checks.
.TP
.B serve
Run local HTTP API mode.
.TP
.B ui
Run local web UI for encrypted auth cache checks.
.TP
.B adapter-list
List built-in site adapters.
.TP
.B session-health
Analyze cookie/JWT health from capture file.
.TP
.B diff-captures
Compare two capture files for header/method changes.
.TP
.B recipe-save
Save a named capture+replay recipe.
.TP
.B recipe-list
List saved recipes.
.TP
.B recipe-run
Run capture+replay using saved recipe.
.TP
.B refresh-tab
Refresh an existing browser tab without closing it.
.TP
.B navigate-tab
Navigate an existing tab to a new URL.
.TP
.B open-tab
Open a new browser tab.
.TP
.B close-tab
Close a specific browser tab.
.SH CAPTURE OPTIONS
.TP
.B \-\-browser
Browser to launch for capture (chrome|edge).
.TP
.B \-\-launch-browser
Launch browser before capture.
.TP
.B \-\-user-data-dir
Browser user data dir root.
.TP
.B \-\-profile-directory
Profile folder name (Default, Profile 1, ...).
.TP
.B \-\-target-hint
Substring to match target URLs.
.TP
.B \-\-include-all-headers
Store all headers (otherwise allowlist only).
.TP
.B \-\-filter-host
Only keep requests where hostname contains value.
.TP
.B \-\-filter-path
Only keep requests where path contains value.
.TP
.B \-\-filter-method
Only keep requests with matching method.
.TP
.B \-\-filter-resource-type
Only keep requests with matching DevTools resource type.
.TP
.B \-\-redact-output
Mask sensitive header values in CLI output.
.TP
.B \-\-adapter
Apply built-in adapter defaults (supabase|github|gmail).
.TP
.B \-\-auto-adapter
Auto-detect adapter from URL/hint text.
.TP
.B \-\-encryption-key
Fernet key for encrypted capture storage.
.TP
.B \-\-encryption-key-env
Environment variable to read Fernet key from.
.TP
.B \-\-refresh-tab
Refresh an existing tab instead of waiting for manual navigation.
.TP
.B \-\-refresh-target-id
Target ID of the tab to refresh (default: auto-detect via \-\-target-hint).
.TP
.B \-\-ignore-cache
Bypass browser cache when refreshing a tab.
.SH TAB MANAGEMENT OPTIONS
.TP
.B \-\-target-id
Target ID of the tab to operate on.
.TP
.B \-\-target-hint
URL or title substring to find the tab.
.TP
.B \-\-ignore-cache
Bypass browser cache (refresh-tab only).
.TP
.B \-\-timeout
Page load timeout in seconds (default: 30).
.TP
.B \-\-url
URL to open (open-tab) or navigate to (navigate-tab).
.SH REPLAY OPTIONS
.TP
.B \-\-request-url
Target replay URL.
.TP
.B \-\-capture-file
Capture JSONL input file.
.TP
.B \-\-method
HTTP method (default: GET).
.TP
.B \-\-data
Raw request body string.
.TP
.B \-\-json-body-file
Path to JSON body file.
.TP
.B \-\-retry-attempts
Retry attempts for network/server failures.
.TP
.B \-\-retry-backoff
Backoff seconds between retries.
.TP
.B \-\-allowed-domain
Repeatable host/domain allowlist for replay safety.
.TP
.B \-\-no-enforce-capture-host
Allow replay to different host than captured request.
.TP
.B \-\-encryption-key
Fernet key for encrypted capture storage.
.SH API MODE
With
.B serve
endpoints are available:
.TP
.B GET /health
Health check.
.TP
.B GET /targets
List current page targets.
.TP
.B POST /capture
Trigger capture (JSON body maps to CaptureConfig).
.TP
.B POST /replay
Trigger replay (JSON body maps to ReplayConfig).
.SH EXAMPLES
.nf
cookie-monster profile-list --browser chrome
cookie-monster list-targets --chrome-host 127.0.0.1 --chrome-port 9222
cookie-monster doctor --browser edge
cookie-monster serve --host 127.0.0.1 --port 8787
cookie-monster refresh-tab --target-hint github.com --ignore-cache
cookie-monster navigate-tab https://example.com --target-hint github
cookie-monster open-tab --url https://github.com
cookie-monster close-tab --target-id AAA111
cookie-monster capture --target-hint github.com --refresh-tab --ignore-cache
.fi
.SH MANUAL VIEW
Use:
.PP
.B man ./man/cookie-monster.1
.SH SECURITY
Use only on accounts/systems you are authorized to access.
